## 主要完成功能

#### 漫画模式

>文字阅读常规是预留padding和页眉页脚的。漫画常规的使用习惯配置底色等却完全不同，本功能的作用是，当打开标识为漫画的书时，自动启用漫画的阅读配置，无需再手动切换。

- [x] 增加漫画模式，当前书源注释里添加comic或者分组名包含漫画关键词时，该书源中的书籍启动漫画模式，该设置下打开的书籍独立的阅读配置，可以根据喜好将padding设置为0，且将反应方式调整为翻滚翻页，去掉页眉页脚等功能。
- [x] 漫画模式下阅读时固定黑色背景，无法调整
- [x] 漫画模式下默认关闭长按图片全屏显示该图片功能。
- [x] 修复看漫画快速切换目录或书籍断言崩溃问题

#### 排版优化

> “强迫症患者”的福音，原阅读使用的StaticLayout文字排版不符合国人习惯，如遇到冒号不允许放置行尾，此类规则会生成很大的字符间距。于是重写排版代码，只针对中文进行断行和排版，常规模式下最多下移一个字符。

- [x] 支持自定义的文字排版功能。支持内部配置的前置后置标点规则，可根据个人喜好进行规则调整。
- [x] 标点避收尾以最多下移一个字符为基本原则，遇到需要下移2个字符的情况，增加标点压缩功能。当行尾出现：2个后置标点；2个前置标点+汉字；前置标点+汉字+后置标点；时，压缩中文全角标点为半角以实现无需下移字符。标点压缩机制为通过getTextBounds获取准确的字符边界，进行位置前移。
- [x] 对于一些非常规的标点连用，不坚持最多下移一个字符的原则，从行尾前索引到符合要求的字直接断行。
- [x] 左对齐排版情况下也会保证文字两边padding相同，不会出现右边空更大的情况。

#### 沉浸式阅读配置

> 沉浸式是指阅读界面的配置界面顶底栏采用和阅读背景相近或相同的颜色，是当前较为流行的设计。这块进行了大量的修改，部分界面变化很大。

- [x] 实现沉浸式的阅读配色方案。在阅读界面下的多个配置窗口配色与当前阅读背景色一致。如文字排版配置、朗读配置、自动翻页、更多配置等。切换阅读背景，则自动切换所有系列配色。
- [x] 去除阅读配置界面的阴影，用分割线取代，实现扁平化。
- [x] 去除4个圆形快捷键，将夜间模式改为左侧悬浮按钮。
- [x] 朗读入口改为快捷方式入口，新增8个快捷方式，并增加书籍展示。这样也可以减少overFlow菜单的设置越来越臃肿。
- [x] 调整部分阅读配置界面的图标样式、间隔、配色，达到美化效果。

#### 阅读记录

> 优化阅读的展示完整性，准确性，以及更细致的记录维度，增加软件使用粘着性。

- [x] 美化阅读记录展示界面，支持更多展示信息，单击可跳转到书籍详情。
- [x] 增加对书籍的已读的标记。
- [x] 默认按照最近阅读时间排序，可选择按照阅读时长由大到小排序。还可以展示已读书籍和有记录书签的书籍。
- [x] 阅读记录记录每本书每天的时间。点击书籍详情后可以看到单个日期阅读多少小时。
- [x] 阅读时间听书和读书独立计时，默认只展示读书时长。
- [x] 多处优化了阅读记录统计时间的准确性，阅读时间增加监控，如果3分钟没有点击事件不再继续累积阅读时间。
- [x] web端读书也能够记录阅读时间

#### EPUB书籍优化

> 对于出版书籍和常规的已完结网文，去阅读精排的epub更省心，不用担心书源失效和书籍质量不佳等问题。但这个不是阅读的重点关注领域，所以我做了大量个人优化。

- [x] 修复同一resource中包含多个章节的书籍。修改方法为根据fragmentId截取当前章节。
- [x] 修复一个章节包含多个resource的书籍的兼容性。此类书籍一般是网络自制精排书，章节正文前包含题注，章节展示，章节图片等独立的html。
- [x] 修复第一章前包含题注、扉页、封面等内容的展示。
- [x] 修复部分书籍opf文件的nameSpace不标准问题。
- [x] 对于当前epub不支持CSS的情况，增加了去除标题、去除标注、去除图片的临时配置。后续支持CSS后可取消。
- [x] 增加epub书籍缓存。加速每次打开epub书籍的速度。

#### WEB读书效果

> 阅读支持web，大神们设计仿照了起点的风格，是其他软件无法比拟的优势。但是这个不是阅读的重点关注领域，我进行了一些个人优化。

- [x] web读书可以保存阅读记录到手机。点击页面保存按钮、关键操作如切换章节退出书籍都会保存记录，每阅读一段时间也会自动保存记录。
- [x] web每次进入书籍会重新从手机端获取最新记录。获取记录后可以点击同步按钮进入最新阅读位置。
- [x] 整体多端同步效果已经非常完美。打开手机后，可以展示云端记录、web记录、本机历史记录。三个记录独立存储。即使选错也可以重新选择。
- [x] web上划取文本后点击键盘M键可以保存书签。书签记录的pos信息精准定位。
- [x] web端的本地书封面采用了独立的样式。
- [x] web端的文本内容与本地保持一致，即增加了替换规则，空格修正，简繁转化。
- [x] web端开放右侧进度条，方面查看当前章备份比。
- [x] 减少漫画书图片间的段间距

#### 其他

> 一些小的改动点，大部分是增加快捷性的实用小功能。

- [x] 增加字重效果，增加配置，以0.1为跨度增加。
- [x] 长按书籍显示分组管理，当前书籍显示为中心，且被框选。在分组管理中增加了书籍详情的入口。
- [x] 导入订阅书源自动导入该订阅名。方便后续进行管理。
- [x] 底栏四大金刚更换成微读图标
- [x] 在书籍阅读界面点击的替换净化规则，只显示全局净化规则和当前书籍的规则。排序按照更新时间。
- [x] 书籍内的换源界面支持分组展示和分组选择。优化了书源搜索的进度条的展示逻辑，更好的支持书源数据库，减少重新搜索频次。增加了书源管理和忽略作者的选择。
- [x] 增加了书源搜索计时功能，方面统计各个书源的搜索速度，来识别优质书源。
- [x] 本地文件夹导入界面，长按文件夹可以实现置顶功能，再次长按取消置顶。